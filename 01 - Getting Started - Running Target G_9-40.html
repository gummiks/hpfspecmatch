<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="img/favicon.ico">
  <title>Getting Started - HPF-SpecMatch</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="css/theme.css" />
  <link rel="stylesheet" href="css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
  <link href="extra.css" rel="stylesheet" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Getting Started";
    var mkdocs_page_input_path = "01 - Getting Started - Running Target G_9-40.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="js/jquery-2.1.1.min.js" defer></script>
  <script src="js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">


<a href='/hpfspecmatch'><img border-radius=0 src='https://gummiks.github.io/hpfspecmatch/img/hpf_specmatch_logov1.png'></a>

        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="./search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="index.html">Home</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a>
                    </li>
                </ul>
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href="01%20-%20Getting%20Started%20-%20Running%20Target%20G_9-40.html">Getting Started</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#import-packages">Import packages</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#read-in-library-data">Read in Library data</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#read-in-example-target">Read in example target</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#run-hpfspecmatch">Run hpfspecmatch</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#summarizing-orders-for-a-given-hpfspecmatch-run">Summarizing orders for a given HPFSpecMatch Run</a>
    </li>
    </ul>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="02%20-%20Visualizing%20Stellar%20Library.html">Exploring the Stellar Library</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="03%20-%20cross-validation.html">Cross-Validation</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">HPF-SpecMatch</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
    
      
    
    <li>Getting Started</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/gummiks/hpfspecmatch#root/01 - Getting Started - Running Target G_9-40.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  
  <hr/>
</div>

          <div role="main">
            <div class="section">
              
                <h1 id="running-hpf-specmatch-for-target-g-9-40">Running HPF-SpecMatch for Target G 9-40</h1>
<h2 id="import-packages">Import packages</h2>
<pre><code class="language-python">from importlib import reload
import os
import glob2
import pandas as pd
import numpy as np
import sys
import hpfspec
import hpfspecmatch
</code></pre>
<h2 id="read-in-library-data">Read in Library data</h2>
<pre><code class="language-python"># download library if does not exist
hpfspecmatch.utils.get_library()
</code></pre>
<pre><code class="language-python"># List of stellar library fits files
library_fitsfiles = hpfspecmatch.config.LIBRARY_FITSFILES

# Read in all files as a HPFSpecList object
HLS =  hpfspec.HPFSpecList(filelist=library_fitsfiles)
</code></pre>
<pre><code class="language-python"># list library stars contained in HPFSpecList object
HLS.splist
</code></pre>
<pre><code class="language-python"># More info on the targets
HLS.df
</code></pre>
<pre><code class="language-python"># Read in required information on all of the
# This has the Teff, Fe/H, and logg for all of the stars
# OBJECT_ID is the HPF name of the star
df_lib = pd.read_csv(hpfspecmatch.config.PATH_LIBRARY_DB)
df_lib
</code></pre>
<h2 id="read-in-example-target">Read in example target</h2>
<pre><code class="language-python"># read in target G-9-40
filename = '../input/G_9-40/Slope-20190301T024821_R01.optimal.fits'
targetname = 'G_9-40'
</code></pre>
<pre><code class="language-python"># Bounds to use for different HPF orders (used for knowing where to start/stop resampling the orders)
hpfspecmatch.BOUNDS
</code></pre>
<h2 id="run-hpfspecmatch">Run hpfspecmatch</h2>
<pre><code class="language-python"># Running full hpfspecmatch for all orders above
# Results and plots will be saved to output directory
outputdir = '../output/G_9-40'
orders=['4', '5', '6', '14', '15', '16', '17']
hpfspecmatch.run_specmatch_for_orders(filename, targetname, outputdir, HLS=HLS, orders=orders)
</code></pre>
<h2 id="summarizing-orders-for-a-given-hpfspecmatch-run">Summarizing orders for a given HPFSpecMatch Run</h2>
<p>The following code explores the standard deviations in the stellar parameters between different orders to check how consistent they are across orders. For the formal parameter uncertainties, we recommend using the cross-validation technique.</p>
<pre><code class="language-python"># collects pickle files for each order of SpecMatch analysis for given target
# contains teff, logg, feh, vsini, weights, and filenames for each order
targetname = 'G_9-40'
files = sorted(glob2.glob('../output/{}/*/*.pkl'.format(targetname)))
</code></pre>
<pre><code class="language-python"># summarizes values from different orders from SpecMatch analysis
# saves two csv files to target output directory:
# 1) parameter values from all of the orders
# 2) median and the standard deviation from different orders

df_orders, df_orders_summary = hpfspecmatch.summarize_values_from_orders(files,targetname)
</code></pre>
<pre><code class="language-python">df_orders_summary
</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>parameters</th>
      <th>median</th>
      <th>std</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>teff</td>
      <td>3429.956155</td>
      <td>18.597423</td>
    </tr>
    <tr>
      <th>1</th>
      <td>logg</td>
      <td>4.872851</td>
      <td>0.008384</td>
    </tr>
    <tr>
      <th>2</th>
      <td>feh</td>
      <td>-0.058265</td>
      <td>0.023794</td>
    </tr>
    <tr>
      <th>3</th>
      <td>vsini</td>
      <td>1.835627</td>
      <td>0.288831</td>
    </tr>
  </tbody>
</table>
</div>

<pre><code class="language-python">df_orders
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="02%20-%20Visualizing%20Stellar%20Library.html" class="btn btn-neutral float-right" title="Exploring the Stellar Library">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="installation.html" class="btn btn-neutral" title="Installation"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/gummiks/hpfspecmatch" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="installation.html" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="02%20-%20Visualizing%20Stellar%20Library.html" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '.';</script>
    <script src="js/theme_extra.js" defer></script>
    <script src="js/theme.js" defer></script>
      <script src="search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
